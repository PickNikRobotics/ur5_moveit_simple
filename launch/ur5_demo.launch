<?xml version="1.0"?>
<launch>
  <!-- Unit test launch file -->
  <!-- The name of the parameter under which the URDF is loaded -->
  <arg name="robot_description" default="robot_description"/>

  <!-- Launch test node -->
  <arg name="run_test_node" default="true"/>

  <!-- Debug Info -->
  <arg name="debug" default="false" />
  <arg unless="$(arg debug)" name="launch_prefix" value="" />
  <arg     if="$(arg debug)" name="launch_prefix" value="gdb --ex run --args" />

  <!-- Launch RViz -->
  <include file="$(find moveit_simple)/test/launch/test_display.launch"/>

  <!-- Launch UR5 -->
  <include file="$(find picknik_ur5_moveit_config)/launch/planning_context.launch">
    <arg name="load_robot_description" value="true"/>
  </include>


  <!-- Nodes for simulating robot motion and state -->
  <node name="joint_trajectory_action" type="joint_trajectory_action" pkg="industrial_robot_client"/>
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>
  <node name="robot_simulator" pkg="industrial_robot_simulator" type="industrial_robot_simulator"/>

  <!-- URDF file for Custom Tool  -->
  <arg name="urdf_file_custom_tool" default="$(find ur5_moveit_simple)/urdf/ur5_custom_tool.urdf"/>
  <!-- Load up Custom Tool Frame from URDF and pubish it to TF -->
  <group ns="tool_frame">
    <!-- Load universal robot description format (URDF) for Custom Tool -->
    <param name="$(arg robot_description)" textfile="$(arg urdf_file_custom_tool)"/>
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher"/>
  </group>

  <!-- Load Joint Names from the yaml files to override default joint names (Joint_1,..) -->
  <rosparam command="load" file="$(find ur5_moveit_simple)/config/joint_names.yaml"/>

  <!-- Static tranform publisher for testing tf lookup -->
  <node name="tf_pub1" type="static_transform_publisher" pkg="tf" args="0.3 0.2 0.4 0.0 1.57 0.0 world tf_pub1 100"/>
  <node name="tf_pub2" type="static_transform_publisher" pkg="tf" args="0.3 0.1 0.4 3.14 0.0 0.0 world tf_pub2 100"/>

  <!-- Static tranform publisher between base_link and world -->
  <!-- <node pkg="tf" type="static_transform_publisher" name="tf_pub2" args="0 0 0 0 0 0 base_link world 100"/> -->

  <!-- Static tranform publisher between table and world -->
  <!-- <node pkg="tf2_ros" type="static_transform_publisher" name="virtual_joint_broadcaster_0" args="0 0 0 0 0 0 world base_link" /> -->
  <node pkg="tf" type="static_transform_publisher" name="tfdummy" args="0 0 0 0 0 0 /world /table 10" />
  <!-- <node pkg="tf" type="static_transform_publisher" name="tfdummy" args="0 0 0 0 0 0 /world /base_link 10" /> -->

  <!-- Test Node -->
  <node name="ur5_demo" pkg="ur5_moveit_simple" type="ur5_demo"
  launch-prefix="$(arg launch_prefix)" />
</launch>
